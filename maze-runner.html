<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maze Runner - Calm Hub</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif; }
    
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, rgba(79,70,229,0.15), rgba(236,72,153,0.15)), url("image.jpg");
      background-size: cover; background-position: center; background-attachment: fixed;
      display: flex; align-items: center; justify-content: center; padding: 20px;
    }

    .game-container {
      max-width: 520px; width: 100%;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(255,255,255,0.9);
      border-radius: 32px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 25px 50px rgba(0,0,0,0.15);
    }

    h1 { font-size: 28px; font-weight: 700; color: #1e293b; margin-bottom: 8px; }
    .game-info { color: #64748b; margin-bottom: 20px; font-size: 14px; line-height: 1.6; }
    
    .difficulty { 
      display: inline-block; padding: 6px 16px; border-radius: 20px; 
      font-size: 12px; font-weight: 700; margin-bottom: 12px;
    }
    .easy { background: #dcfce7; color: #166534; }
    .medium { background: #fef3c7; color: #92400e; }
    .hard { background: #fee2e2; color: #991b1b; }
    .expert { background: #ede9fe; color: #5b21b6; }
    .master { background: #fce7f3; color: #9f1239; }

    #gameCanvas {
      border: 4px solid #e0e7ff; border-radius: 20px;
      background: #f1f5f9;
      display: block; margin: 20px auto;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }

    .stats {
      display: flex; justify-content: space-around; margin: 20px 0;
      font-size: 16px; font-weight: 600; color: #4f46e5;
    }
    .stat { text-align: center; }
    .stat-value { font-size: 24px; display: block; color: #10b981; font-weight: 800; }

    .controls { margin: 20px 0; }
    .btn {
      padding: 12px 24px; margin: 5px;
      background: linear-gradient(135deg, #10b981, #059669);
      color: white; border: none; border-radius: 20px;
      font-size: 14px; font-weight: 600; cursor: pointer;
      transition: all 0.2s;
    }
    .btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(16,185,129,0.3); }
    .btn:disabled { background: #9ca3af; cursor: not-allowed; transform: none; }
    
    .arrow-keys {
      display: grid;
      grid-template-columns: repeat(3, 60px);
      gap: 8px;
      margin: 20px auto;
      justify-content: center;
    }
    
    .arrow-key {
      width: 60px; height: 60px;
      background: linear-gradient(135deg, #6366f1, #4f46e5);
      border: none; border-radius: 12px;
      color: white; font-size: 24px;
      cursor: pointer; transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(99,102,241,0.3);
    }
    
    .arrow-key:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(99,102,241,0.5); }
    .arrow-key:active { transform: translateY(0); }
    .arrow-key.blank { background: transparent; box-shadow: none; cursor: default; }

    .back-link {
      display: inline-block; margin-top: 20px;
      color: #6366f1; text-decoration: none; font-weight: 600; font-size: 15px;
    }
    
    /* Completion Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(8px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active { display: flex; }
    
    .modal-content {
      background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
      backdrop-filter: blur(24px);
      border-radius: 32px;
      padding: 50px 40px;
      text-align: center;
      max-width: 400px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.3);
      animation: popIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    @keyframes popIn {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .trophy { font-size: 80px; margin-bottom: 20px; animation: bounce 1s infinite; }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .modal h2 { font-size: 32px; color: #1e293b; margin-bottom: 16px; }
    .modal p { color: #64748b; font-size: 16px; margin-bottom: 30px; }
    .modal .btn { margin: 8px; }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e2e8f0;
      border-radius: 20px;
      margin: 16px 0;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #10b981, #059669);
      border-radius: 20px;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>üåÄ Maze Runner</h1>
    <p class="game-info">Use ARROW KEYS or buttons to reach the GOLDEN STAR!</p>
    
    <span id="difficulty" class="difficulty easy">LEVEL 1 - EASY</span>
    
    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar" style="width: 10%"></div>
    </div>
    
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    
    <div class="stats">
      <div class="stat">
        <span class="stat-value" id="moves">0</span>
        Moves
      </div>
      <div class="stat">
        <span class="stat-value" id="level">1</span>
        / 10 Levels
      </div>
      <div class="stat">
        <span class="stat-value" id="time">0</span>
        Sec
      </div>
    </div>

    <!-- Arrow Key Controls -->
    <div class="arrow-keys">
      <div class="arrow-key blank"></div>
      <button class="arrow-key" onclick="movePlayer(0, -1)">‚ñ≤</button>
      <div class="arrow-key blank"></div>
      <button class="arrow-key" onclick="movePlayer(-1, 0)">‚óÑ</button>
      <div class="arrow-key blank"></div>
      <button class="arrow-key" onclick="movePlayer(1, 0)">‚ñ∫</button>
      <div class="arrow-key blank"></div>
      <button class="arrow-key" onclick="movePlayer(0, 1)">‚ñº</button>
      <div class="arrow-key blank"></div>
    </div>

    <div class="controls">
      <button class="btn" onclick="resetGame()">üîÑ Restart Level</button>
      <button class="btn" onclick="nextLevel()" id="nextBtn" disabled>Next Level ‚ñ∂Ô∏è</button>
    </div>
    
    <a href="games.html" class="back-link">‚Üê Back to Games</a>
  </div>

  <!-- Completion Modal -->
  <div class="modal" id="completionModal">
    <div class="modal-content">
      <div class="trophy">üèÜ</div>
      <h2>ALL LEVELS COMPLETED!</h2>
      <p>Congratulations! You've mastered all 10 mazes!<br>Total Moves: <strong id="totalMoves">0</strong><br>Total Time: <strong id="totalTime">0s</strong></p>
      <button class="btn" onclick="playAgain()">üîÑ Play Again</button>
      <button class="btn" onclick="closeModal()">üéÆ Back to Games</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    const CELL = 40;
    let playerX = 1, playerY = 1;
    let moves = 0, level = 1, seconds = 0;
    let totalMoves = 0, totalTime = 0;
    
    // 10 CHALLENGING MAZES (0 = path, 1 = wall, 2 = goal)
    const MAZES = [
      [ // Level 1 - EASY
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,0,1,0,1,0,1,1,0,1],
        [1,0,1,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,1,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 2 - EASY
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,1,0,0,0,1,0,0,1],
        [1,0,1,1,1,0,1,1,0,1],
        [1,0,0,0,1,0,0,1,0,1],
        [1,1,1,0,1,1,0,1,0,1],
        [1,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,1,1,1,1,1,0,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 3 - MEDIUM
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,1,0,0,1,0,0,1],
        [1,1,0,1,1,0,1,1,0,1],
        [1,0,0,0,1,0,0,1,0,1],
        [1,0,1,0,1,1,0,1,0,1],
        [1,0,1,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 4 - MEDIUM
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,1,0,0,1,0,0,0,1],
        [1,0,1,1,0,1,1,1,0,1],
        [1,0,0,1,0,0,0,1,0,1],
        [1,1,0,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,1,0,0,0,1],
        [1,1,1,1,0,1,1,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 5 - HARD
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,1,1,0,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,0,1],
        [1,0,1,0,0,0,0,0,0,1],
        [1,0,1,0,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,1,1,1,1,1,0,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 6 - HARD
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,1,0,1,0,0,1,0,1],
        [1,0,1,0,1,1,0,1,0,1],
        [1,0,0,0,0,1,0,0,0,1],
        [1,1,1,1,0,1,1,1,0,1],
        [1,0,0,0,0,0,1,0,0,1],
        [1,0,1,1,1,0,1,0,1,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,1,1,0,1,1,1,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 7 - EXPERT
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,1,0,1,0,0,0,1],
        [1,1,0,1,0,1,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,0,1],
        [1,0,0,0,1,0,0,1,0,1],
        [1,1,1,0,1,0,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 8 - EXPERT
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,1,0,0,0,1,0,0,1],
        [1,0,1,1,1,0,1,1,0,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,1,1,0,1,1,1,1,0,1],
        [1,0,0,0,0,1,0,0,0,1],
        [1,0,1,1,0,1,0,1,1,1],
        [1,0,0,1,0,0,0,0,0,1],
        [1,1,0,1,1,1,1,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 9 - MASTER
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,1,0,0,1,0,0,1],
        [1,1,0,1,0,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,0,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,1,1,0,1,0,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ],
      [ // Level 10 - MASTER
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,1,1,0,1,0,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,1,0,0,0,1],
        [1,1,1,1,0,1,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
      ]
    ];
    
    const DIFFICULTY_LABELS = [
      { text: 'LEVEL 1 - EASY', class: 'easy' },
      { text: 'LEVEL 2 - EASY', class: 'easy' },
      { text: 'LEVEL 3 - MEDIUM', class: 'medium' },
      { text: 'LEVEL 4 - MEDIUM', class: 'medium' },
      { text: 'LEVEL 5 - HARD', class: 'hard' },
      { text: 'LEVEL 6 - HARD', class: 'hard' },
      { text: 'LEVEL 7 - EXPERT', class: 'expert' },
      { text: 'LEVEL 8 - EXPERT', class: 'expert' },
      { text: 'LEVEL 9 - MASTER', class: 'master' },
      { text: 'LEVEL 10 - MASTER', class: 'master' }
    ];
    
    let currentMaze = MAZES[0];
    
    function updateDifficulty() {
      const diff = DIFFICULTY_LABELS[level - 1];
      const diffEl = document.getElementById('difficulty');
      diffEl.textContent = diff.text;
      diffEl.className = 'difficulty ' + diff.class;
      
      // Update progress bar
      const progress = (level / 10) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
    }
    
    function draw() {
      ctx.clearRect(0, 0, 400, 400);
      
      for(let y = 0; y < 10; y++) {
        for(let x = 0; x < 10; x++) {
          if(currentMaze[y][x] === 1) {
            ctx.fillStyle = '#60a5fa';
            ctx.fillRect(x * CELL, y * CELL, CELL, CELL);
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.strokeRect(x * CELL, y * CELL, CELL, CELL);
          } else if(currentMaze[y][x] === 2) {
            ctx.save();
            ctx.shadowBlur = 30;
            ctx.shadowColor = '#f59e0b';
            ctx.fillStyle = '#fbbf24';
            ctx.beginPath();
            ctx.arc(x * CELL + CELL/2, y * CELL + CELL/2, 18, 0, Math.PI*2);
            ctx.fill();
            ctx.restore();
          }
        }
      }
      
      ctx.save();
      ctx.shadowBlur = 25;
      ctx.shadowColor = '#10b981';
      ctx.fillStyle = '#10b981';
      ctx.beginPath();
      ctx.arc(playerX * CELL + CELL/2, playerY * CELL + CELL/2, 16, 0, Math.PI*2);
      ctx.fill();
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 3;
      ctx.stroke();
      ctx.restore();
    }
    
    function movePlayer(dx, dy) {
      const newX = playerX + dx;
      const newY = playerY + dy;
      
      if(newX < 0 || newX >= 10 || newY < 0 || newY >= 10) return;
      if(currentMaze[newY][newX] === 1) return;
      
      playerX = newX;
      playerY = newY;
      moves++;
      document.getElementById('moves').textContent = moves;
      
      draw();
      
      if(currentMaze[newY][newX] === 2) {
        totalMoves += moves;
        totalTime += seconds;
        
        setTimeout(() => {
          if(level === 10) {
            showCompletion();
          } else {
            alert(`üéâ LEVEL ${level} COMPLETE!\nMoves: ${moves}\nTime: ${seconds}s`);
            document.getElementById('nextBtn').disabled = false;
            playWinSound();
          }
        }, 200);
      }
    }
    
    function showCompletion() {
      playWinSound();
      document.getElementById('totalMoves').textContent = totalMoves;
      document.getElementById('totalTime').textContent = totalTime;
      document.getElementById('completionModal').classList.add('active');
    }
    
    function playWinSound() {
      try {
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = audioCtx.createOscillator();
        osc.frequency.value = 800;
        const gain = audioCtx.createGain();
        gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + 0.4);
      } catch(e) {}
    }
    
    function resetGame() {
      playerX = 1; playerY = 1;
      moves = 0;
      updateUI();
      draw();
    }
    
    function nextLevel() {
      level++;
      currentMaze = MAZES[level - 1];
      playerX = 1; playerY = 1;
      moves = 0; seconds = 0;
      document.getElementById('nextBtn').disabled = true;
      updateDifficulty();
      updateUI();
      draw();
    }
    
    function playAgain() {
      level = 1;
      currentMaze = MAZES[0];
      playerX = 1; playerY = 1;
      moves = 0; seconds = 0;
      totalMoves = 0; totalTime = 0;
      document.getElementById('nextBtn').disabled = true;
      document.getElementById('completionModal').classList.remove('active');
      updateDifficulty();
      updateUI();
      draw();
    }
    
    function closeModal() {
      window.location.href = 'games.html';
    }
    
    function updateUI() {
      document.getElementById('moves').textContent = moves;
      document.getElementById('level').textContent = level;
      document.getElementById('time').textContent = seconds;
    }
    
    document.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowUp') { e.preventDefault(); movePlayer(0, -1); }
      if(e.key === 'ArrowDown') { e.preventDefault(); movePlayer(0, 1); }
      if(e.key === 'ArrowLeft') { e.preventDefault(); movePlayer(-1, 0); }
      if(e.key === 'ArrowRight') { e.preventDefault(); movePlayer(1, 0); }
    });
    
    setInterval(() => {
      seconds++;
      updateUI();
    }, 1000);
    
    updateDifficulty();
    draw();
  </script>
</body>
</html>
