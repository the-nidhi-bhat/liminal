<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Fill Tiles ‚Äì Calm Hub</title>
  <style>
    /* --- Premium Reset & Typography --- */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
        -webkit-font-smoothing: antialiased;
    }

    /* --- Luxury Animated Background --- */
    body {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, rgba(79, 70, 229, 0.15), rgba(236, 72, 153, 0.15)),
                    url("image.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        padding: 20px;
    }

    /* --- The Glass Shell --- */
    .shell {
        width: 100%;
        max-width: 680px;
        border-radius: 32px;
        padding: 40px;
        
        /* High-end Frosted Glass */
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(24px) saturate(180%);
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        
        border: 1px solid rgba(255, 255, 255, 0.9);
        box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.12),
            0 0 0 1px rgba(255, 255, 255, 0.6) inset;

        /* Entry Animation */
        opacity: 0;
        transform: translateY(20px);
        animation: floatUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    @keyframes floatUp {
        to { opacity: 1; transform: translateY(0); }
    }

    /* --- Header --- */
    .top-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
        flex-wrap: wrap;
        gap: 16px;
    }

    .title-block h1 {
        font-size: 28px;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 4px;
        letter-spacing: -0.5px;
    }

    .title-block p {
        font-size: 15px;
        color: #64748b;
    }

    .back-link a {
        font-size: 14px;
        color: #64748b;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .back-link a span {
        color: #6366f1;
        font-weight: 700;
    }

    .back-link a:hover {
        color: #334155;
    }

    /* --- Game Area --- */
    .game-area {
        background: #ffffff;
        border-radius: 24px;
        padding: 32px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        border: 1px solid #f1f5f9;
    }

    /* Toolbar */
    .color-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 24px;
        flex-wrap: wrap;
        gap: 16px;
    }

    .toolbar-label {
        font-size: 13px;
        font-weight: 600;
        color: #64748b;
        margin-right: 8px;
    }

    #colorSwatches {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .color-swatch {
        width: 32px;
        height: 32px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        position: relative;
    }

    .color-swatch:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }

    .color-swatch.selected {
        transform: scale(1.15);
        box-shadow: 0 0 0 2px #ffffff, 0 0 0 4px #6366f1;
        z-index: 2;
    }

    /* Grid */
    .color-grid {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 8px;
        margin-bottom: 24px;
    }

    .color-cell {
        aspect-ratio: 1; /* Keeps cells square */
        border-radius: 12px;
        background: #f1f5f9;
        border: 1px solid transparent;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .color-cell:hover {
        transform: scale(0.95);
        background: #e2e8f0;
    }

    /* Button */
    .btn {
        padding: 10px 20px;
        border-radius: 12px;
        border: none;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        color: #ffffff;
        background: linear-gradient(135deg, #6366f1, #ec4899);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        transition: all 0.2s ease;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3);
    }

    .btn:active {
        transform: translateY(0);
    }

    .mini-note {
        font-size: 13px;
        color: #94a3b8;
        text-align: center;
        font-weight: 500;
    }

    /* Mobile */
    @media (max-width: 480px) {
        .shell { padding: 24px 20px; }
        .color-toolbar { justify-content: center; }
        .color-grid { gap: 4px; }
        .color-cell { border-radius: 8px; }
    }
  </style>
</head>
<body>
  <div class="shell">
    
    <div class="top-row">
      <div class="title-block">
        <h1>Color Fill Tiles üé®</h1>
        <p>Paint a tiny grid with colors that match your mood.</p>
      </div>
      <div class="back-link">
        <a href="games.html">‚Üê <span>Back to Games</span></a>
      </div>
    </div>

    <div class="game-area">
      
      <div class="color-toolbar">
        <div style="display:flex; align-items:center;">
            <span class="toolbar-label">Palette:</span>
            <div id="colorSwatches"></div>
        </div>
        <button class="btn" id="clearColorsBtn">Clear Canvas</button>
      </div>

      <div id="colorGrid" class="color-grid"></div>
      
      <p class="mini-note">Tip: Try creating a pattern that represents "today's feeling".</p>
    </div>
  </div>

  <script>
    // --- Audio Context ---
    let audioCtx;
    function getAudioCtx() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      return audioCtx;
    }

    function playClickSound() {
      const ctx = getAudioCtx();
      if (ctx.state === "suspended") ctx.resume();

      const osc = ctx.createOscillator();
      const gain = ctx.createGain();

      // Soft "dop" sound
      osc.type = "sine"; 
      osc.frequency.setValueAtTime(600, ctx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(300, ctx.currentTime + 0.1);

      gain.gain.setValueAtTime(0.1, ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.1);

      osc.connect(gain);
      gain.connect(ctx.destination);
      osc.start();
      osc.stop(ctx.currentTime + 0.12);
    }

    const colorSwatchesEl = document.getElementById("colorSwatches");
    const colorGridEl = document.getElementById("colorGrid");
    const clearColorsBtn = document.getElementById("clearColorsBtn");

    // Premium Palette
    const colors = [
        "#f472b6", // Pink
        "#f87171", // Rose
        "#fb923c", // Orange
        "#facc15", // Yellow
        "#4ade80", // Green
        "#38bdf8", // Sky
        "#818cf8", // Indigo
        "#a78bfa", // Purple
        "#94a3b8", // Slate
        "#1e293b"  // Dark
    ];
    
    let currentColor = colors[0];

    function renderSwatches() {
      colorSwatchesEl.innerHTML = "";
      colors.forEach((c, idx) => {
        const sw = document.createElement("div");
        sw.className = "color-swatch";
        sw.style.backgroundColor = c;
        
        if (idx === 0) sw.classList.add("selected");
        
        sw.addEventListener("click", () => {
          currentColor = c;
          document.querySelectorAll(".color-swatch").forEach(el => el.classList.remove("selected"));
          sw.classList.add("selected");
          playClickSound();
        });
        
        colorSwatchesEl.appendChild(sw);
      });
    }

    function renderColorGrid() {
      colorGridEl.innerHTML = "";
      // 8x4 = 32 tiles
      const total = 32; 
      for (let i = 0; i < total; i++) {
        const cell = document.createElement("div");
        cell.className = "color-cell";
        
        cell.addEventListener("click", () => {
          cell.style.backgroundColor = currentColor;
          // Add slight pop animation on paint
          cell.style.transform = "scale(0.9)";
          setTimeout(() => cell.style.transform = "scale(1)", 100);
          
          playClickSound();
        });
        
        colorGridEl.appendChild(cell);
      }
    }

    clearColorsBtn.addEventListener("click", () => {
        // Nice wipe animation
        const cells = document.querySelectorAll('.color-cell');
        cells.forEach((cell, i) => {
            setTimeout(() => {
                cell.style.backgroundColor = "#f1f5f9";
            }, i * 10); // Staggered wipe
        });
    });

    // Init
    renderSwatches();
    renderColorGrid();
  </script>
</body>
</html>
